# todo-app

## usage
本项目采用[airtable](https://airtable.com/)进行数据存储，若你想运行使用此项目，请：
1. 申请一个airtable账号
2. 创建一个用来存储todo数据的base（名称可以自己定义）
3. 在上一步创建的base里添加一个名为todolist的表格
4. 打开[airtable api](https://airtable.com/api)，进入之前创建的base，点击右边的JavaScript选项，下拉找到api key和base key
```javascript
const base = require('api_key').base('base_key');
```
5. 将项目下src/store/index.js里的api key和base key换成你自己的
```javascript
var base = new Airtable({apiKey: 'your_api_key'}).base('your_base_key');
```
6. 运行项目
```shell
npm install
npm run serve
```

## 开发日志
### 20210721
1. 完成基本功能实现：
- [x] 显示所有待办事项
- [x] 增加新的待办事项（通过按钮或回车键）
- [x] 勾选完成待办事项
- [x] 筛选完成/未完成的待办事项
- [x] 移除待办事项
2. 完成UI的完善
- [x] UI美化

### 20210722
- [ ] 实现响应式布局（暂无思路，先搁置）
2. 增加显示时间功能：
- [x] 当前时间（已完成）
- [x] 待办事项添加时的时间（已完成）
- [x] 待办事项完成的时间（已完成）
遇到的坑：
new Date().getMonth()是从0开始的，得到实际月份需要加一
new Date().getDay()是获取星期的而不是几号的
new Date().getDate()才是获取几号的
3. 更改显示逻辑：
- [x] 默认优先显示未完成的待办事项而不是全部事项（已完成）
- [x] 已完成事项进行UI区分，并不予删除（已完成）
- [ ] 未完成的待办事项勾选后，过渡消失（难）
4. 编辑栏增加输入逻辑：
- [x] 最多输入字数（已完成）
- [x] 最多显示字数,超出最多显示字数部分用...显示（已完成）
- [x] 5. 对于可能出现错误勾选的情况，再次点击可取消勾选（已完成）
- [ ] 6. 显示各列表事项的数目
- [ ] 7. 勾选的变化UI增加过渡

### 20210726
1. 批量移除：
- [x] 切换到该模式，对批量选择的item进行移除（已完成）
- [x] 点击全选，移除全部（已完成）
- [x] 模式的切换：点击“批量移除”及“完成”、已移除全部（已完成）
- [x] 当处于批量移除模式时，无法添加新的待办事项（已完成）

### 20210727
1. 添加拖拽功能：
- [x] 拖拽项目调整顺序（已完成）-使用vuedraggable
- [ ] 将项目拖拽到其他分类标签下可实现移动（难）
2. 进一步构思其他标签模块：
- [ ] 数据分离：store - module？
- [ ] 组件是否可以复用？
初步构思：收集箱和愿望清单项目卡片不需要勾选完成，项目清单的项目卡片则可以点击展开详情
3. 路由问题：点击当前界面的tab报错 "NavigationDuplicated: Avoided redundant navigation to current location"

### 20210728
1. 调整逻辑细节：
- [x] 各个列表模式下若没有项目时，都应提示消息。此前的判断依据是todoItems的长度，故在已完成和未完成下没有项目也会显示批量删除（已完成）
2. 排序问题：（已完成）
- [x] 在all模式下，始终保持为完成的事项在前，已完成的事项在后
- [x] 当有未完成的事项完成了，排序变为已完成事项的首位
- [x] 当有已完成的事项取消完成，排序变为首位

### 20210730
1. 显示逻辑调整：
- [x] 若当天完成项目，把显示完成时间改为“当天完成”（已完成）
2. 增加选择主题色功能：
- [x] 定义主题色模式：（选思路2）
思路1：以hsv颜色模型为基础的一组颜色，用户选择某个颜色后通过修改hsv某个或多个分量来得到一组主题色
思路2：设置多个预设，用户对预设进行选择（preferred）
- [ ] ~~新增颜色选择器~~
- [x] 选择颜色后改变主题色（用css变量的方式）

### 20210803
1. 增加记忆功能
- [x] 利用localStorage来读取和保存已经记录的todo项，这样下一次启动应用时还是可以看到上次关闭时的记录
* 问题：localStorage的容量只有5M，满了怎么办

### 20210804
1. 当列表项过多，对后面的项目进行隐藏处理，保持页面整洁（待完善）
- [x] 设置非展开状态下最大可显示数
- [x] 设置展开按钮，点击后可展开所有项
- [x] 若应显示数小于等于最大可显示数，不显示展开按钮
* 怎么关闭展开？
2. 点击todo项弹出详细页：
- [x] 点击todo项（除完成勾选和移除按钮）弹出todo详细页
- [x] 点击详细页的关闭按钮关闭详细页

### 20210805
1. 解决id冲突问题：count属性在项目启动时始终为1，会造成新建的项id与之前的冲突，这样在移除项目时会连带移除相同id的项
* 设置一个动态获取起始id的方法，从已存储的todoList获得

### 20210811
在airtable分支上进行开发，遇到的问题总结：
1. 用airtable获取数据不能直接将records作为数据，而应该用records.fields
2. 加载速度相对比较缓慢（尤其是添加操作）
3. 重新加载后在all模式下无法根据已完成和未完成排序，而是根据在airtable的存储顺序排序
4. detail的值暂时无法更新到airtable（已完成）

### 20210812
- [ ] 新增关闭detail页的方式：点击detail页以外的区域
* 增加登录操作
1. 用airtable保存账号密码信息（这其实违背了我做这个功能的初衷）
2. 以API Key和base key作为登录凭证

### 20220128
- [ ] 新增收藏功能：
1. 点击切换收藏状态
2. 添加筛选项来筛查收藏项
